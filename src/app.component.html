
<main class="container mx-auto p-4 sm:p-6 md:p-8">
  <div class="max-w-4xl mx-auto">
    
    <!-- Header -->
    <header class="text-center mb-8">
      <h1 class="text-4xl sm:text-5xl font-bold text-slate-800">WorkingDays Calculator</h1>
      <p class="mt-2 text-lg text-slate-600">Calculate a future date by adding working days.</p>
    </header>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      
      <!-- Left Panel: Calculator Inputs -->
      <div class="lg:col-span-2 bg-white p-6 sm:p-8 rounded-2xl shadow-lg">
        <div class="space-y-6">
          
          <div>
            <label for="country" class="block text-sm font-medium text-slate-700 mb-1">Country</label>
            <select id="country" [value]="selectedCountryCode()" (change)="onCountryChange($event)" class="w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition">
              @for (country of countries(); track country.countryCode) {
                <option [value]="country.countryCode">{{ country.countryName }}</option>
              }
            </select>
             <p class="mt-2 text-xs text-slate-500 italic">Working days exclude weekends and public holidays for the selected country.</p>
          </div>
          
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
            <div>
              <label for="start-date" class="block text-sm font-medium text-slate-700 mb-1">Start Date</label>
              <input type="date" id="start-date" [value]="startDateString()" (input)="onStartDateChange($event)" class="w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition">
            </div>
            <div>
              <label for="working-days" class="block text-sm font-medium text-slate-700 mb-1">Working Days to Add</label>
              <input type="number" id="working-days" min="0" [value]="workingDays()" (input)="onWorkingDaysChange($event)" class="w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition">
            </div>
          </div>
          
          <!-- Result Display -->
          @if (resultDate(); as date) {
            <div class="bg-sky-50 border-l-4 border-sky-500 p-4 rounded-md">
              <h3 class="text-lg font-semibold text-slate-800">Result Date</h3>
              <p class="text-3xl font-bold text-sky-600 mt-1">
                {{ date | date:'fullDate' }}
              </p>
               <p class="text-xs text-slate-500 mt-2">{{ resultNote() }}</p>
            </div>
          } @else {
             <div class="bg-amber-50 border-l-4 border-amber-500 p-4 rounded-md text-center">
              <p class="text-amber-700 font-medium">Please provide valid inputs to see the result.</p>
            </div>
          }

          <!-- Mock Ad & Reminder Section -->
          <div class="border-t border-slate-200 pt-6 space-y-4">
             <h3 class="text-lg font-semibold text-slate-800">Reminders</h3>
              <div class="flex items-center justify-between bg-slate-100 p-3 rounded-lg">
                <span class="font-medium text-slate-700">Reminder Credits: <span class="text-2xl font-bold text-sky-600 align-middle">{{ reminderCredits() }}</span></span>
                <button (click)="watchAd()" class="px-4 py-2 bg-gradient-to-r from-teal-400 to-cyan-500 text-white font-semibold rounded-md shadow-md hover:from-teal-500 hover:to-cyan-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500 transition-transform transform hover:scale-105">
                  Watch Ad for Credit
                </button>
              </div>

             <button (click)="addReminder()" [disabled]="reminderCredits() <= 0 || !resultDate()" 
                [class]="'w-full py-3 px-4 font-semibold rounded-md shadow-md transition-all ' + 
                         (reminderCredits() > 0 && resultDate() ? 'bg-sky-600 text-white hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500' 
                                                                : 'bg-slate-300 text-slate-500 cursor-not-allowed')">
              Use 1 Credit to Add Reminder
            </button>
             @if (showReminderSuccess()) {
              <div class="mt-2 text-center bg-green-100 text-green-800 p-2 rounded-md font-medium">
                Reminder set successfully!
              </div>
            }
          </div>
        </div>
      </div>
      
      <!-- Right Panel: Holiday List -->
      <aside class="bg-white p-6 sm:p-8 rounded-2xl shadow-lg">
        <h3 class="text-xl font-bold text-slate-800 mb-4 border-b pb-2">
            Holidays for {{ selectedCountryConfig()?.countryName }} ({{ startDateString().split('-')[0] }})
        </h3>
        @if (holidaysForDisplay().length > 0) {
          <div class="max-h-96 overflow-y-auto space-y-3 pr-2">
            @for (holiday of holidaysForDisplay(); track holiday.date) {
              <div class="flex justify-between items-center bg-slate-50 p-2 rounded-md">
                <span class="text-sm font-medium text-slate-700">{{ holiday.name }}</span>
                <span class="text-sm text-slate-500">{{ holiday.date | date:'MMM d' }}</span>
              </div>
            }
          </div>
        } @else {
           <p class="text-sm text-slate-500 text-center py-8">No holiday data available for the selected year.</p>
        }
      </aside>

    </div>
  </div>
</main>
